@if (open && plant) {
  <div
    class="fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm bg-black/50 p-4 modal-backdrop"
    [class.closing]="isClosing"
    (click)="closeModal()"
  >
    <div
      class="bg-leaf rounded-4xl w-6xl max-h-[90vh] overflow-y-auto shadow-lg relative flex modal-content"
      [class.closing]="isClosing"
      (click)="$event.stopPropagation()"
    >
      <button
        class="absolute top-0 right-2 text-ruby font-bold text-4xl z-10 hover:text-sand"
        (click)="closeModal()"
        aria-label="Fermer"
      >
        &times;
      </button>

      <!-- Image & quote -->
      <div class="flex flex-col items-center justify-center gap-2 w-1/3 pl-8 py-8">
        <div class="w-52 h-52 bg-sand/5 rounded-full border-4 border-papaya ring-4 ring-ruby shadow-lg flex items-center justify-center">
          <img [src]="plant.image" [alt]="plant.name"
          class="w-48 h-48 rounded-full object-cover" />
        </div>
        <div class="my-4 text-center">
          <h3 class="text-3xl font-extrabold tracking-tight text-sand drop-shadow-lg">{{ plant.name }}</h3>
          <span class="block text-papaya text-base font-semibold italic">{{ plant.latinName }}</span>
        </div>

        @if (plant.quote) {
          <blockquote class="italic text-sand text-center text-base border-l-4 border-papaya pl-3 mb-6">
            «&nbsp;{{ plant.quote }}&nbsp;»
          </blockquote>
        }

        <div class="flex flex-col items-center justify-end mt-2 gap-3">
          @if (plant.origins) {
            <span class="inline-block bg-sand text-ruby px-3 py-1 rounded-xl shadow text-xs font-medium tracking-wide">
              Origines : {{ plant.origins.join(', ') }}
            </span>
          }
        </div>
        <div class="flex flex-col items-center justify-end mt-2 gap-3">
          @if (plant.externalLink) {
            <a
              class="text-xs text-snake italic text-right"
              [href]="plant.externalLink.url"
              target="_blank"
              rel="noopener noreferrer">
              Pour + d’infos consultez <span class="underline hover:text-papaya/60 transition duration-300">Wikipédia</span>
            </a>
          }
        </div>
      </div>

      <!-- Infos -->
      <div class="flex-1 flex flex-col justify-start gap-6 p-8">
        <div class="grid grid-cols-2 gap-6">
          <!-- Vertus -->
          <div class="flex flex-col bg-snake/70 rounded-xl shadow-lg p-5 min-h-[120px]">
            <div class="flex items-center gap-3 text-papaya mb-2">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 21V3m0 0c-2.974 2.98-8.007 9.235-6 13.25 1.183 2.185 3.837 2.713 6 1.25 2.163 1.463 4.817.935 6-1.25C20.007 12.236 14.974 5.98 12 3z"/>
              </svg>
              <span class="font-bold text-lg tracking-wider">Vertus</span>
            </div>
            <ul class="text-sand/90 text-base list-disc list-inside space-y-1 font-medium ml-1">
              @for (virtue of plant.virtues; track virtue) {
                <li>{{ virtue }}</li>
              }
            </ul>
          </div>
          <!-- Usages -->
          <div class="flex flex-col rounded-xl border-2 border-sand/40 shadow-lg p-5 min-h-[120px]">
            <div class="flex gap-2 items-center mb-2 text-snake">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 640 640">
                <path d="M320 576C214 576 128 490 128 384C128 292.8 258.2 109.9 294.6 60.5C300.5 52.5 309.8 48 319.8 48L320.2 48C330.2 48 339.5 52.5 345.4 60.5C381.8 109.9 512 292.8 512 384C512 490 426 576 320 576zM240 376C240 362.7 229.3 352 216 352C202.7 352 192 362.7 192 376C192 451.1 252.9 512 328 512C341.3 512 352 501.3 352 488C352 474.7 341.3 464 328 464C279.4 464 240 424.6 240 376z"/>
              </svg>
              <span class="font-bold text-lg tracking-wider">Usages</span>
            </div>
            <ul class="text-sand/40 text-base list-disc list-inside space-y-1 font-medium ml-1">
              @for (usage of plant.uses; track usage) {
                <li>{{ usage }}</li>
              }
            </ul>
          </div>
        </div>
        <!-- Symbolique -->
        @if (plant.symbolism) {
          <div class="w-full bg-papaya/80 rounded-2xl p-5 shadow-lg flex flex-col justify-center items-center">
            <span class="text-ruby/90 text-lg font-bold tracking-wide mb-1">
              + Symbolique & purification +
            </span>
            @for (symbol of plant.symbolism; track symbol) {
              <span class="text-sand/90 text-base leading-relaxed font-medium">
                {{ symbol }}
              </span>
            }
          </div>
        }
      </div>
    </div>
  </div>
}
